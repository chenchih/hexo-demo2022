
---
title: 如何使用 Hexo + GitHub Pages 架設個人網誌 (Hexo-1)
date: 2022-06-21 20:34:18
tags:
- Hexo
categories:
- Hexo
---
＃ 如何使用 Hexo + GitHub Pages 架設個人網誌

## 什麼是 Hexo？
- HEXO 是一套`Static Site Generators(SSG)`網誌框架工具，只要把建立和編寫`markdown`就可以變成轉成靜態網頁。一般都用在架自己的部捼洛客，不用花很多時間設計排版等等。目前最有名的SSG有包括: **Hexo(node.js語言)**，**HUGO(go語言)**，**Jekyll(ruby語言)** 等等。
- 其實就是一個基於 `Node.js` 開發的網誌框架。具有下列幾項**特點**：
    - NODE.JS
    - 能夠支援 **Markdown** 語法解析文章，並透過主題渲染靜態檔案
    - 具有豐富的**外掛套件**
    - 支援一鍵部署到 **GitHub Pages** 或 **Heroku** 等支援靜態網頁的空間

## 前置作業

### 安裝需要工具
在開始安裝 Hexo 之前，必須先在電腦安裝下列工具: 

> - Linux (Ubuntu, Debian)：
>> `sudo apt-get install git-core`
> - Linux (Fedora, Red Hat, CentOS)
>> `sudo yum install git-core`

- #### [git](https://git-scm.com/): 是專們做版本控制的工具。外面有多版本控制，我選用github，因為他比較多人用，還有他有GitHub Page可以幫我們架設網站，又是免費。window 可以用這個git-bash 來下載[git-for-window](https://gitforwindows.org/)
> mac 安裝:
>> `brew install git` 
    
## Hexo 環境建置 
### Ste 1. 安裝 Hexo
- 安裝 hexo
開啟 CLI/Terminal 介面（例如 cmd `git-bash` 等終端機），並輸入下列指令安裝 Hexo：
    > `npm install hexo-cli -g`
- 檢查有安裝成功
安裝完後，查看 Hexo 版本，確認是否有安裝成功，可輸入:
    > `hexo version` 
    或 
    > `hexo -v` 

### Step 2. 初始化 Hexo
其實HEXO初始化，其實就是去github的`hexojs/hexo-starter` clone下來到你的目錄。Hexo初始化，有兩種做法:
- 方法1
可以先建立資料夾名稱，然後`cd`進去資料夾，再下`hexo init`初始化，如下:
    ```
    #1. create directory
    mkdir hexotest
    #2. go to hexotest directory
    cd hexotest
    #3 hexo inital 
    hexo init
    ```
- 方法2
我們可以指定我們資料夾名稱，在 init 後面如:
    > `hexo init <資料夾名稱>`
### Step 3. 在資料夾安裝所需檔案

上一步我們已經下`hexo init`，如果失敗，說明有些套件沒有，所以請下列指來安裝`npm 套件`
> `$ npm install`

安裝完成後，資料夾會看到下方這些檔案和資料夾:
- 架構:
```
.
├── _config.landscape.yml
├── _config.yml
├── db.json
├── package-lock.json
├── package.json
├── scaffolds
│   ├── draft.md
│   ├── page.md
│   └── post.md
├── source
│   └── _posts
│       └── hello-world.md
└── themes

```

#### _config.yml

- 有關網站配置的檔案，可修改各種配置設定。例如：網站標題、網站的網址、使用主題名稱等等
- 詳細內容可以參考[官方文件](https://hexo.io/zh-tw/docs/configuration)

#### package.json
記錄所有載入的應用程式資料，也就是專案中需要的所有模組。

#### scaffolds 模板

- 當我們建立新文章時，Hexo 會根據 scaffolds 中的模板建立相對應的檔案。理面有post、page 和 draft，它會從這裡copy到source資料夾。
- 資料夾中有三種預設[佈局](https://hexo.io/zh-tw/docs/writing.html)：post、page 和 draft，分別對應：要發布的文章、頁面、草稿

#### themes 主題

- 用來存放主題的資料夾
- Hexo 會根據主題來解析 scouce 資料夾中的檔案並產生靜態頁面。預設主題為 [landscape](https://github.com/hexojs/hexo-theme-landscape)

#### source 資源

- 主要用來存放我們寫的文章，頁面地方，一般都是，例如檔 Markdown 、圖片、各種頁面（分頁、關於等）。
- 以 `_` 開頭的檔案、資料夾或隱藏檔案會被忽略，除了 `_posts` 資料夾以外
- 我們可以從重新立名用我們文章用日期來取名，這樣才好認。
- Markdown 檔和 HTML 檔會被解析，並放到 public 資料夾，而其他檔案則會被拷貝過去

#### source & public & .deploy_git 的差別
- 執行 `$ hexo generate`或 `hexo g` 之後，會把 source理資料夾中的Markdown檔和HTML 檔進行解析，再結合主題進行渲染，生成我們看到的靜態網站，也就是會產生在public資料夾
- 如果你下 `hexo clean`，會把public裡面Markdown清掉，你再按`$ hexo generate`重新稱生回來。
- 執行 `$ hexo deploy` 之後，則會將 public 文件夾中的內容部署到 GitHub，並生成 .deploy_git 資料夾，因此內容與 public 幾乎相同
- 這三者的關係可想成：
    > source -> public -> .deploy_git
- 你可以這樣想PUBLIC當案就是你網頁會顯示出來。只要你source資料還在，都可以再把它產生回來。
    - 產生`MD` -> HTML到PUBLIC: `hexo generate`
    - public 推上github: `hexo deploy`

## 常用指令
Hexo 會用到一些指令，更多詳細指令可參考[官方文件](https://hexo.io/zh-tw/docs/commands)。
### 1. new 新增文章post: `hexo new` 
> **建立文章Post**
>> `hexo new \[layout] \<title>`
>> or
>> `hexo new \<title>`
> **建立頁面Pages**
>> $ hexo new post \<title>
- 你也可以去`scaffolds`資料夾複製posts or page 到 `/source/_posts/title.md`
- 如果沒有設定 layout，則會使用 _config.yml 中的 default_layout 來設定
- 檔案名稱盡量以英文命名，避免出現亂碼，也可以用中文。

> 若是對 Markdown 相關語法不熟悉，可參考這篇筆記：[Markdown 格式介紹](https://hackmd.io/@chenchih/markup-note)

### 2. clean 清除靜態檔案與快取
> `$ hexo clean`
- 在每次儲存修正後的檔案之前，會建議先輸入此指令，清除快取檔案 （db.json）和已產生的靜態檔案（public），public裡面Markdown清掉。
- 你再按`$ hexo generate` 靜態檔案（public）會重新產生回來。

### 3. generate 產生靜態檔案
> `hexo generate`
> 或
>`$ hexo g`
- 重新產生靜態檔案，把source理的Markdown檔進行解析並放到 public 資料夾。
- 只要你有修改你的MD檔案一定要下這個指令，不然他不會轉成靜態檔案，就無法在網頁顯示出來。

### 4. server 啟動伺服器
- 在本地端啟動 Hexo 伺服器，預設路徑為：`http://localhost:4000/`
> 啟動server ，預設port 為4000
>>  `hexo server`

這時候你你就可以去瀏覽器打開: http://localhost:4000 就是你架設HEXO的首頁。\

- 停止server，按 `Ctrl + C` 即可關閉
- 手動換其他port，如果port 4000被用掉
>> `$ npm -s -p:xxx ` #xxx是你要的port

#### <font color="red"> 補充:</font>
如果你產生完靜態網頁(`hexo -g`)，可以去單獨把PUBLIC資料夾放在server，就可以看到預覽結果。
你可以停掉hexo server服務，用ctrl+c。如果用VSCODE可以用CODE LIVE套件，就會顯示預覽設定結果。

